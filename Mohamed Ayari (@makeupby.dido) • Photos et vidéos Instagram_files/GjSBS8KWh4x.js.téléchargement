;/*FB_PKG_DELIM*/

__d("PolarisQPCampaigns",[],(function(a,b,c,d,e,f){"use strict";a={fbconnect:"1939973836325880",gdprDialog:"385107635302749",gdprFullscreen:"361346177689723",gdprMegaphoneDis:"1432819323512524",gdprMegaphoneNondis:"1126242244191536"};b=a;f["default"]=b}),66);
__d("PolarisFeedStoryTrayWrapper.react",["cx","CometPlaceholder.react","PolarisFeedPageConstants","PolarisPanavisionQEHelpers","PolarisStoryTrayGlimmerPlaceholder.react","PolarisUA","hero-tracing","react","useMatchViewport"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(a){var b=c("useMatchViewport")("min","width",d("PolarisFeedPageConstants").FEED_WITH_PADDING_THRESHOLD_MIN),e=d("PolarisPanavisionQEHelpers").hasFamiliarFeed(),f=d("PolarisPanavisionQEHelpers").hasPolarisFeedRevamp();return i.jsx(d("hero-tracing").HeroPagelet,{name:"story_tray",children:function(g,h){return i.jsxs("div",{className:"_aac4"+(b?" _aac5":"")+(d("PolarisUA").isDesktop()?" _aac6":"")+(e||f?" _aj3f":"")+(f?" _ajdu":""),children:[i.jsx(c("CometPlaceholder.react"),{fallback:i.jsx(c("PolarisStoryTrayGlimmerPlaceholder.react"),{}),name:"FeedStoryTrayWrapper",children:a.children(g)}),i.jsx(h,{})]})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisInstagramReelTrayImpressionFalcoEvent",["PolarisFalcoLogger"],(function(a,b,c,d,e,f,g){"use strict";var h={falco:!0,pigeon:!1};a={log:function(a){d("PolarisFalcoLogger").FalcoLogger.log("reel_tray_impression",a(),{},h)}};b=a;g["default"]=b}),98);
__d("PolarisStoryTrayItemBase.react",["PolarisIGCoreText","PolarisStoryStrings","PolarisUA","PolarisUserAvatarWithStories.react","polarisAvatarConstants","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={avatar:{marginBottom:"x1e56ztr",marginTop:"x1gslohp",$$css:!0},isMuted:{opacity:"xbyyjgo",$$css:!0},root:{alignItems:"x6s0dn4",alignSelf:"xamitd3",backgroundColor:"xjbqb8w",borderTop:"x76ihet",borderEnd:"xwmqs3e",borderBottom:"x112ta8",borderStart:"xxxdfa6",cursor:"x1ypdohk",display:"x78zum5",flexDirection:"xdt5ytf",paddingBottom:"x18d9i69",paddingTop:"xexx8yu",textAlign:"x2b8uid",width:"x1fu8urw",$$css:!0},username:{boxSizing:"x9f619",display:"x1lliihq",maxWidth:"xc99tnm",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",textAlign:"x2b8uid",textOverflow:"xlyipyv",whiteSpace:"xuxw1ft",$$css:!0},usernameLong:{letterSpacing:"x1yf5rgg",maxWidth:"xhikscq",paddingEnd:"xg83lxy",paddingStart:"x1h0ha7o",$$css:!0}};function a(a){var b=a.clickTargetElementId,e=a.isLive,f=a.isLoadingOverride,g=a.isMuted,j=a.isSeen,k=a.label,l=a.onClick,m=a.profilePictureUrl;a=a.username;var n=j?d("PolarisStoryStrings").seenStoryTrayItemAriaLabel(a):d("PolarisStoryStrings").unseenStoryTrayItemAriaLabel(a);return h.jsxs("button",{"aria-label":n,className:c("stylex")(i.root,g&&i.isMuted),onClick:l,role:"menuitem",tabIndex:"0",children:[h.jsx(c("PolarisUserAvatarWithStories.react"),{className:"x1e56ztr x1gslohp",clickTargetElementId:b,isClickable:!1,isLink:!1,isLoadingOverride:f,profilePictureUrl:m,showLiveBadge:e===!0,showLivePulse:e===!0,showLiveRing:e===!0,size:d("polarisAvatarConstants").STORY_TRAY_AVATAR_SIZE,storyEntrypoint:"reel_feed_timeline",username:a}),h.jsx(c("PolarisIGCoreText"),{color:j?"ig-secondary-text":"ig-primary-text",size:"footnote",zeroMargin:!0,children:h.jsx("div",{className:c("stylex")(i.username,d("PolarisUA").isDesktop()&&i.usernameLong),children:k})})]})}a.displayName=a.name+" [from "+f.id+"]";g.PolarisStoryTrayItemBase=a}),98);
__d("PolarisLiveStoryTrayItem.react",["IGDSBox.react","IGDSText.react","PolarisIGCoreText","PolarisLiveActions","PolarisLiveStrings","PolarisReactRedux","PolarisStoryTrayItemBase.react","polarisLiveSelectors","qex","react","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useCallback,j=b.useEffect,k=b.useState,l=!1;function a(a){var b=a.broadcast,e=a.isVisible,f=a.onScrollEnter,g=a.trayPosition;a=b.cobroadcasters;var m=b.muted,n=d("PolarisReactRedux").useDispatch(),o=k(!1),p=o[0],q=o[1];o=i(function(){q(!0),c("qex")._("1375")===!1&&c("setTimeout")(function(){q(!1)},500*Math.random()),n(d("PolarisLiveActions").openLivePlayerFromStoryTray(b,"live_feed_timeline",g))},[b,n,g]);var r=d("PolarisReactRedux").useSelector(function(a){return d("polarisLiveSelectors").getDisplayedBroadcasters(a,b.id)});r=r.primary;j(function(){e&&f(b,g)},[b,e,f,g]);a=a!=null&&a.length>0?h.jsxs(c("IGDSBox.react"),{direction:"row",position:"relative",children:[h.jsx(c("IGDSBox.react"),{marginEnd:1,maxWidth:44,position:"relative",children:h.jsx(c("PolarisIGCoreText"),{display:"truncated",size:"footnote",zeroMargin:!0,children:r.username})}),h.jsx(c("IGDSText.react"),{size:"footnote",zeroMargin:!0,children:d("PolarisLiveStrings").liveBroadcasters(a.length)})]}):r.username;return h.jsx(d("PolarisStoryTrayItemBase.react").PolarisStoryTrayItemBase,{isLive:!0,isLoadingOverride:p,isMuted:m,isSeen:l,label:a,onClick:o,profilePictureUrl:r.profile_pic_url,username:r.username})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisStoryTrayItem.react",["PolarisDsaQEHelpers","PolarisErrorBoundary.react","PolarisLogger","PolarisPanavisionQEHelpers","PolarisReactRedux","PolarisStoriesStrings","PolarisStoryState","PolarisStoryTrayItemBase.react","nullthrows","polarisMemoizeLast","polarisStorySelectors","polarisUserSelectors","qex","react","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=0;e=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(b=e=a.call.apply(a,[this].concat(g))||this,e.state={isLoading:!1},e.$1=c("polarisMemoizeLast")(function(a){return"StoryTrayItem_"+i++}),e.$3=function(){e.setState({isLoading:!0}),c("qex")._("1375")===!1&&c("setTimeout")(function(){e.setState({isLoading:!1})},500*Math.random()),e.props.onClick(e.props.reel.id,e.$1(e.props.reel.id)),d("PolarisDsaQEHelpers").isDsaFeed()&&d("PolarisLogger").logAction("reelPlaybackEntryDsaFeed",{implementation:d("PolarisPanavisionQEHelpers").hasPolarisFeedRevamp()?"relay":"non-relay",reel_position:e.props.trayPosition,source:e.props.currentFeed===d("PolarisStoryState").PolarisStoryTrayVariants.HOME?"default":"non_profiled"})},b)||babelHelpers.assertThisInitialized(e)}var e=b.prototype;e.componentDidMount=function(){this.props.isVisible&&this.$2()};e.componentDidUpdate=function(a){!a.isVisible&&this.props.isVisible&&this.$2()};e.$2=function(){this.props.onScrollEnter(c("nullthrows")(this.props.reel.userId),this.props.trayPosition)};e.render=function(){var a=this.props,b=a.isMuted,c=a.isSeen,e=a.isViewer,f=a.profilePictureUrl;a=a.username;e=e?d("PolarisStoriesStrings").YOUR_STORY_TEXT:a;return h.jsx(d("PolarisStoryTrayItemBase.react").PolarisStoryTrayItemBase,{clickTargetElementId:this.$1(this.props.reel.id),isLoadingOverride:this.state.isLoading,isMuted:b||!1,isSeen:c,label:e,onClick:this.$3,profilePictureUrl:f,username:this.props.username})};return b}(h.PureComponent);function a(a,b){var e=d("polarisUserSelectors").getUserById(a,c("nullthrows")(b.reel.userId));return{currentFeed:a.stories.currentFeed,isMuted:b.reel.muted,isSeen:d("polarisStorySelectors").isReelSeen(b.reel),isViewer:a.users.viewerId===b.reel.id,profilePictureUrl:c("nullthrows")(e.profilePictureUrl),username:c("nullthrows")(e.username)}}var j=d("PolarisReactRedux").connect(a)(e);function b(a){return h.jsx(c("PolarisErrorBoundary.react"),{errorRenderer:function(a){return null},children:h.jsx(j,babelHelpers["extends"]({},a))})}b.displayName=b.name+" [from "+f.id+"]";g["default"]=b}),98);
__d("PolarisOwnStoryTrayItem.react",["cx","fbt","invariant","IGDSCircleAddPanoFilledIcon","PolarisReactRedux","PolarisStoriesStrings","PolarisStoryActions","PolarisStoryCreationFileForm.react","PolarisStoryTrayItem.react","PolarisUA","PolarisUserAvatar.react","nullthrows","polarisStorySelectors","polarisUserSelectors","react"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=d("react");e=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(b=e=a.call.apply(a,[this].concat(g))||this,e.$2=function(){if(!d("PolarisUA").isMobile())return;c("nullthrows")(e.$1).handleStoryCreationClick()},e.$3=function(a,b){e.props.onOpenReel(a,b,"reel_feed_timeline")},b)||babelHelpers.assertThisInitialized(e)}var e=b.prototype;e.render=function(){var a=this,b=this.props,e=b.hasOwnReel,f=b.profilePictureUrl;b=babelHelpers.objectWithoutPropertiesLoose(b,["hasOwnReel","profilePictureUrl"]);if(e===!0){b.onOpenReel;e=b.reel;b.viewerId;b=babelHelpers.objectWithoutPropertiesLoose(b,["onOpenReel","reel","viewerId"]);e!=null||j(0,51576);return k.jsx(c("PolarisStoryTrayItem.react"),babelHelpers["extends"]({},b,{onClick:this.$3,reel:e}))}return k.jsxs("button",{className:"_aac0",onClick:this.$2,children:[k.jsx(c("PolarisUserAvatar.react"),{className:"_aac1",isLink:!1,profilePictureUrl:f,size:56}),k.jsx("div",{className:"_aac2",children:d("PolarisStoriesStrings").YOUR_STORY_TEXT}),k.jsx("div",{className:"_aac3",children:k.jsx(c("IGDSCircleAddPanoFilledIcon"),{alt:i._("__JHASH__Dq6RyIKc3_p__JHASH__"),color:"ig-primary-button",size:16})}),k.jsx(c("PolarisStoryCreationFileForm.react"),{entryPoint:"your_story_placeholder",ref:function(b){return a.$1=b}})]})};return b}(k.Component);function a(a,b){var c=d("polarisUserSelectors").getUserById(a,b.viewerId);return{profilePictureUrl:c.profilePictureUrl,reel:d("polarisStorySelectors").getReel(a,b.viewerId)}}function b(a){return{onOpenReel:function(b,c,e){a(d("PolarisStoryActions").openReel(b,c,e))}}}f=d("PolarisReactRedux").connect(a,b)(e);g["default"]=f}),98);
__d("PolarisStoryTray.react",["cx","PolarisFeedStoryTrayWrapper.react","PolarisIGVirtualList.react","PolarisInstagramReelTrayImpressionFalcoEvent","PolarisLiveLogger","PolarisLiveStoryTrayItem.react","PolarisOwnStoryTrayItem.react","PolarisPanavisionQEHelpers","PolarisS351857IDLoggingFix","PolarisStoriesLoggingUtils","PolarisStoryState","PolarisStoryTrayGlimmerPlaceholder.react","PolarisStoryTrayItem.react","PolarisUA","PolarisVirtualHSnapScroll.react","nullthrows","polarisFeedReducer","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=d("react").createRef,k=4,l=5,m=80,n=78,o=80,p=10,q=500,r=4,s=16,t=2,u={leftVisibleItem:-1,rightVisibleItem:-1};a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(b=e=a.call.apply(a,[this].concat(g))||this,e.state=function(){var a={};for(var b=d("PolarisStoryState").PolarisStoryTrayVariants.members(),c=Array.isArray(b),e=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(c){if(e>=b.length)break;f=b[e++]}else{e=b.next();if(e.done)break;f=e.value}f=f;a[f]=babelHelpers["extends"]({},u)}return a}(),e.didLogComponentLoad=!1,e.didLogStoryTrayLoad=!1,e.scrollRef=j(),e.$1=function(a,b){e.props.onLoadReel(c("nullthrows")(e.props.reels),a,b)},e.$2=function(a,b){var f=e.props.reels?e.props.reels.get(b-1):null;c("PolarisInstagramReelTrayImpressionFalcoEvent").log(function(){return{a_pk:c("PolarisS351857IDLoggingFix")(a,Number(a)),has_my_reel:c("nullthrows")(e.props.hasOwnReel)?1:0,is_new_reel:e.props.isFullySeen(f==null?void 0:f.id)?0:1,new_reel_count:c("nullthrows")(e.props.newReelCount),pigeon_reserved_keyword_module:"reel_feed_timeline",reel_type:d("PolarisStoriesLoggingUtils").getTypeForLogging(f==null?void 0:f.type),tray_position:b,tray_session_id:e.props.traySession,viewed_reel_count:c("nullthrows")(e.props.seenReelCount)}})},e.$3=function(a,b){c("PolarisInstagramReelTrayImpressionFalcoEvent").log(function(){return{a_pk:c("PolarisS351857IDLoggingFix")(a.broadcast_owner,Number(a.broadcast_owner)),has_my_reel:c("nullthrows")(e.props.hasOwnReel)?1:0,is_new_reel:0,new_reel_count:c("nullthrows")(e.props.newReelCount),pigeon_reserved_keyword_module:"reel_feed_timeline",reel_type:d("PolarisLiveLogger").getReelTypeForLogging(a),tray_position:b,tray_session_id:e.props.traySession,viewed_reel_count:c("nullthrows")(e.props.seenReelCount)}})},e.$4=function(a){var b,f=a.index;a=a.isVisible;var g=e.$5()?1:0,h={isVisible:a,onClick:e.$1,onScrollEnter:e.$2,trayPosition:f};b=(b=e.props.items)==null?void 0:b[f-g];var j,k;f<g?j=i.jsx(c("PolarisOwnStoryTrayItem.react"),babelHelpers["extends"]({hasOwnReel:e.props.hasOwnReel,viewerId:e.props.viewerId},h)):b&&(b.type==="live"?j=i.jsx(c("PolarisLiveStoryTrayItem.react"),{broadcast:b.live,isVisible:a,onScrollEnter:e.$3,trayPosition:f}):b.type==="reel"&&(k=b.reel,j=i.jsx(c("PolarisStoryTrayItem.react"),babelHelpers["extends"]({reel:k},h))));return i.jsx("div",{className:"_aauk"+(d("PolarisUA").isDesktop()?" _aegn":""),"data-testid":void 0,children:j},k?k.id:f)},e.$7=function(a){var b=a.endPct;a=a.startPct;var c=e.state[e.props.currentFeed],d=c.leftVisibleItem;c=c.rightVisibleItem;var f=Math.floor(a),g=Math.ceil(b);(d!==f||c!==g)&&e.setState(function(a){var b;return babelHelpers["extends"]({},a,(b={},b[e.props.currentFeed]=babelHelpers["extends"]({},a[e.props.currentFeed],{leftVisibleItem:f,rightVisibleItem:g}),b))})},b)||babelHelpers.assertThisInitialized(e)}var e=b.prototype;e.componentDidUpdate=function(a){if(this.props.currentFeed!==a.currentFeed){var b;a=this.state[this.props.currentFeed].leftVisibleItem;(b=this.scrollRef.current)==null?void 0:b.resetToIndex(a+1)}};e.$5=function(){if(d("PolarisUA").isMobile())return!0;return this.props.hideOwnStory===!0&&d("PolarisUA").isDesktop()?!1:!!this.props.hasOwnReel};e.$6=function(){var a=this.props.items,b=this.$5()?1:0;a=a!=null?a.length:0;return b+a};e.$8=function(a,b){var c=this,d=this.$6();return Array.from(Array(d),function(d,e){return c.$4({index:e,isVisible:e>=a&&e<=b})})};e.render=function(){var a=this.props,b=a.currentFeed,e=a.dataFetchStatus,f=a.reels;a=a.viewportWidth;b=this.state[b];var g=b.leftVisibleItem;b=b.rightVisibleItem;var h=this.$6(),j=d("PolarisPanavisionQEHelpers").hasFamiliarFeed(),u=d("PolarisPanavisionQEHelpers").hasPolarisFeedRevamp();j=j||u;u=Math.max(p,Math.ceil(a/m));var v=d("PolarisUA").isDesktop()?i.jsx(c("PolarisVirtualHSnapScroll.react"),{animationDuration:q,autoScrollOnFocus:!1,disableScrollSnap:!0,gutterWidth:j?t:s,itemWidth:j?o:n,onVisibilityChange:this.$7,overscan:l,pagerVariant:d("PolarisPanavisionQEHelpers").hasWideStoryTray()?"stories_v2":"stories",pageSize:r,scrollRef:this.scrollRef,children:this.$8(g,b)}):i.jsx(c("PolarisIGVirtualList.react"),{className:"_aaum",containerSize:"auto",direction:"horizontal",estimatedItemSize:m,initialRenderCount:u,itemCount:h,overscanCount:k,pageletName:"story_tray_inner",renderer:this.$4});return i.jsx(i.Fragment,{children:(d("PolarisUA").isDesktop()&&h>0||d("PolarisUA").isMobile()||f==null)&&i.jsx(c("PolarisFeedStoryTrayWrapper.react"),{children:function(a){return i.jsx(i.Fragment,{children:f==null||e===d("polarisFeedReducer").EXTRAS_DATA_FETCH_STATUS.loading?i.jsx(c("PolarisStoryTrayGlimmerPlaceholder.react"),{}):i.jsx("div",{className:"_aauo"+(f==null?" _aaup":""),ref:a,role:"menu",children:v})})}})})};return b}(i.Component);g.MOBILE_TRAY_COL_WIDTH=m;g.StoryTray=a}),98);
__d("PolarisStoryTrayContainer.react",["PolarisLinkBuilder","PolarisReactRedux","PolarisStoryActions","PolarisStoryState","PolarisStoryTray.react","nullthrows","polarisStorySelectors","qex","react","useCometRouterDispatcher"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useEffect,j=5;function a(a){var b=d("PolarisReactRedux").useSelector(function(a){return d("polarisStorySelectors").getSeenCountInStoryTray(a)}),e=d("PolarisReactRedux").useDispatch(),f=c("useCometRouterDispatcher")(),g=d("PolarisReactRedux").useStore(),k=g.getState().users.users,l=d("PolarisReactRedux").useSelector(d("polarisStorySelectors").getStoriesContent),m=l.feedTray,n=l.traySession,o=g.getState().stories.currentFeed,p=d("PolarisReactRedux").useSelector(function(a){return{currentFeed:a.stories.currentFeed,dataFetchStatus:a.feed.extrasDataFetchStatus,hasOwnReel:d("polarisStorySelectors").currentFeedIsHome(a)&&d("polarisStorySelectors").userHasReel(a,c("nullthrows")(a.users.viewerId)),isFullySeen:d("polarisStorySelectors").getIsFullySeen(a),items:o===d("PolarisStoryState").PolarisStoryTrayVariants.FOLLOWING?d("polarisStorySelectors").getFeedStoryItemsWithoutOwnAndBroadcasts(a):d("polarisStorySelectors").getFeedStoryItemsWithoutOwn(a),loadingId:a.stories.trayLoadingId,newReelCount:m&&m.count()-c("nullthrows")(b),reels:d("polarisStorySelectors").getFeedStoryTrayWithoutOwn(a),seenReelCount:b,storyPrefetchFinished:a.feed.storyPrefetchComplete,traySession:n,viewerId:a.users.viewerId,viewportHeight:a.displayProperties.viewportHeight,viewportWidth:a.displayProperties.viewportWidth}},d("PolarisReactRedux").shallowEqual);l=function(a,b,c){e(d("PolarisStoryActions").openReelsMedia(a,"reel_feed_timeline",b,c))};g=function(a,b){e(d("PolarisStoryActions").loadReelsMediaForTray(b,a,{batchSize:15,fetchDistance:5}))};i(function(){if(c("qex")._("1358")===!0){var a;(a=p.reels)==null?void 0:a.forEach(function(a,b){if(b<j&&a.userId!=null){b=k.get(a.userId);a=a.itemIds!=null&&a.itemIds.length>0?a.itemIds[0]:null;if(b!=null&&b.username!=null&&a!=null){b=d("PolarisLinkBuilder").buildUserStoryLinkWithMediaId(b.username,a);f==null?void 0:f.prefetchRouteDefinition(b)}}})}},[f,p.reels,k]);return h.jsx(d("PolarisStoryTray.react").StoryTray,babelHelpers["extends"]({},a,p,{onLoadReel:l,onStoryItemScrollEnter:g}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);